<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>주은혜 찬양사역팀 매니저 Pro</title>
    
    <!-- 필수 라이브러리 (CDN) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src='https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js'></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        :root { --primary: #4834d4; --bg: #f8faff; }
        body { font-family: 'Pretendard', sans-serif; background-color: var(--bg); color: #333; -webkit-tap-highlight-color: transparent; margin: 0; overflow-x: hidden; }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .scale-in { animation: scaleIn 0.2s ease-out; }
        @keyframes scaleIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .progress-bar-fill { transition: width 0.3s ease-in-out; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .line-clamp-1 { display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden; }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        input[type="date"]::-webkit-inner-spin-button,
        input[type="date"]::-webkit-calendar-picker-indicator { cursor: pointer; }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, collection, onSnapshot, setDoc, addDoc, deleteDoc, query } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = JSON.parse(__firebase_config);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'onnuri-grace-pro';
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        window.MyFirebase = { 
            auth, db, doc, collection, onSnapshot, setDoc, addDoc, deleteDoc, query, 
            signInAnonymously, signInWithCustomToken, onAuthStateChanged, appId 
        };
        window.dispatchEvent(new Event('firebase-ready'));
    </script>

    <!-- React Source Code -->
    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        const MASTER_PASSWORD = "onnurigrace";
        const SHARE_LINK = window.location.href;

        const INITIAL_MEMBERS = [
            { name: "박용규", part: "staff", status: "active", role: "성가사" },
            { name: "도은경", part: "staff", status: "active", role: "반주자" },
            { name: "기민정", part: "soprano", status: "active" }, { name: "김수진", part: "soprano", status: "active" },
            { name: "김순화", part: "soprano", status: "active" }, { name: "김오남", part: "soprano", status: "active" },
            { name: "김용순", part: "soprano", status: "active" }, { name: "김인숙", part: "soprano", status: "active" },
            { name: "김자선", part: "soprano", status: "active" }, { name: "김지애", part: "soprano", status: "active" },
            { name: "김지혜", part: "soprano", status: "active" }, { name: "김혜정", part: "soprano", status: "active" },
            { name: "남혜경", part: "soprano", status: "active" }, { name: "서은정", part: "soprano", status: "active" },
            { name: "신은아", part: "soprano", status: "active" }, { name: "신현수", part: "soprano", status: "active" },
            { name: "오현주", part: "soprano", status: "active" }, { name: "우연경", part: "soprano", status: "active" },
            { name: "이선민", part: "soprano", status: "active" }, { name: "이현희", part: "soprano", status: "active" },
            { name: "정혜림", part: "soprano", status: "active" }, { name: "정혜영", part: "soprano", status: "active" },
            { name: "조인희", part: "soprano", status: "active" }, { name: "최경옥", part: "soprano", status: "active" },
            { name: "최지애", part: "soprano", status: "active" }, { name: "최주영", part: "soprano", status: "active" },
            { name: "하영애", part: "soprano", status: "active" }, { name: "한지연", part: "soprano", status: "active" },
            { name: "한정아", part: "soprano", status: "active" }, { name: "홍정희", part: "soprano", status: "active" },
            { name: "김경순", part: "alto", status: "active" }, { name: "김은정", part: "alto", status: "active" },
            { name: "김지영", part: "alto", status: "active" }, { name: "박연미", part: "alto", status: "active" },
            { name: "박은영", part: "alto", status: "active" }, { name: "반상순", part: "alto", status: "active" },
            { name: "심은주", part: "alto", status: "active" }, { name: "신지수", part: "alto", status: "active" },
            { name: "유인실", part: "alto", status: "active" }, { name: "이세인", part: "alto", status: "active" },
            { name: "이수미", part: "alto", status: "active" }, { name: "임선례", part: "alto", status: "active" },
            { name: "전주이", part: "alto", status: "active" },
            { name: "김상수", part: "tenor", status: "active" }, { name: "김성주", part: "tenor", status: "active" },
            { name: "김정경", part: "tenor", status: "active" }, { name: "노선호", part: "tenor", status: "active" },
            { name: "박경수", part: "tenor", status: "active" }, { name: "박임수", part: "tenor", status: "active" },
            { name: "소종욱", part: "tenor", status: "active" }, { name: "신성균", part: "tenor", status: "active" },
            { name: "오정근", part: "tenor", status: "active" }, { name: "우준호", part: "tenor", status: "active" },
            { name: "원치호", part: "tenor", status: "active" }, { name: "윤상수", part: "tenor", status: "active" },
            { name: "이효종", part: "tenor", status: "active" }, { name: "임설", part: "tenor", status: "active" },
            { name: "정윤조", part: "tenor", status: "active" }, { name: "조윤석", part: "tenor", status: "active" },
            { name: "최원영", part: "tenor", status: "active" }, { name: "홍용찬", part: "tenor", status: "active" },
            { name: "김두환", part: "bass", status: "active" }, { name: "김민석", part: "bass", status: "active" },
            { name: "김선덕", part: "bass", status: "active" }, { name: "김용수", part: "bass", status: "active" },
            { name: "김정민", part: "bass", status: "active" }, { name: "김진배", part: "bass", status: "active" },
            { name: "노영진", part: "bass", status: "active" }, { name: "박주완", part: "bass", status: "active" },
            { name: "서형주", part: "bass", status: "active" }, { name: "오상태", part: "bass", status: "active" },
            { name: "윤한숙", part: "bass", status: "active" }, { name: "윤용중", part: "bass", status: "active" },
            { name: "정운주", part: "bass", status: "active" }, { name: "정지영", part: "bass", status: "active" },
            { name: "조성천", part: "bass", status: "active" }, { name: "주종성", part: "bass", status: "active" },
            { name: "한구용", part: "bass", status: "active" }, { name: "황성남", part: "bass", status: "active" }
        ];

        const PARTS = [
            { id: 'soprano', name: '소프라노', color: '#e91e63' },
            { id: 'alto', name: '알토', color: '#ff9800' },
            { id: 'tenor', name: '테너', color: '#2196f3' },
            { id: 'bass', name: '베이스', color: '#37474f' }
        ];

        const compressImage = (base64Str, maxWidth = 800, maxHeight = 800, quality = 0.5) => {
            return new Promise((resolve) => {
                if (!base64Str) return resolve(null);
                const img = new Image();
                img.src = base64Str;
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    let width = img.width; let height = img.height;
                    if (width > height) { if (width > maxWidth) { height *= maxWidth / width; width = maxWidth; } }
                    else { if (height > maxHeight) { width *= maxHeight / height; height = maxHeight; } }
                    canvas.width = width; canvas.height = height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0, width, height);
                    resolve(canvas.toDataURL('image/jpeg', quality));
                };
            });
        };

        const extractYoutubeId = (url) => {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url?.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        };

        const App = () => {
            const [user, setUser] = useState(null);
            const [ready, setReady] = useState(false);
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [showAuthOverlay, setShowAuthOverlay] = useState(false);
            const [authAction, setAuthAction] = useState(null);

            const [members, setMembers] = useState([]);
            const [history, setHistory] = useState([]);
            const [musicList, setMusicList] = useState([]);
            const [videoList, setVideoList] = useState([]);
            const [activeTab, setActiveTab] = useState('stats');
            const [toast, setToast] = useState({ show: false, msg: '' });
            const [modal, setModal] = useState({ isOpen: false, title: '', msg: '', onConfirm: null, image: null });
            const [attendanceMap, setAttendanceMap] = useState({});
            const [editingHistory, setEditingHistory] = useState(null);
            const [showInterestModal, setShowInterestModal] = useState(false);

            useEffect(() => {
                const checkAuth = localStorage.getItem('onnuri_auth_v2');
                if (checkAuth === "true") setIsAuthenticated(true);

                const initApp = async () => {
                    if (!window.MyFirebase) return;
                    const { auth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } = window.MyFirebase;
                    try {
                        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                            await signInWithCustomToken(auth, __initial_auth_token);
                        } else {
                            await signInAnonymously(auth);
                        }
                    } catch (e) { console.error("Auth failed", e); }
                    onAuthStateChanged(auth, (u) => {
                        setUser(u);
                        if (u) loadData(u);
                    });
                };

                window.addEventListener('firebase-ready', initApp);
                if (window.MyFirebase) initApp();
                return () => window.removeEventListener('firebase-ready', initApp);
            }, []);

            const loadData = (u) => {
                const { db, doc, collection, onSnapshot, setDoc, appId } = window.MyFirebase;
                
                // Roster
                onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'roster'), (s) => {
                    if (s.exists()) setMembers(s.data().list || []);
                    else { setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'roster'), { list: INITIAL_MEMBERS }); setMembers(INITIAL_MEMBERS); }
                });

                // Attendance History
                onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'history'), (s) => {
                    const list = []; s.forEach(d => list.push({ id: d.id, ...d.data() }));
                    list.sort((a, b) => new Date(b.date.replace(/\. /g, '-').replace(/\.$/, '')) - new Date(a.date.replace(/\. /g, '-').replace(/\.$/, '')));
                    setHistory(list);
                    setReady(true);
                });

                // Music & Sheet
                onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'music'), (s) => {
                    const list = []; s.forEach(d => list.push({ id: d.id, ...d.data() }));
                    list.sort((a, b) => new Date(b.date) - new Date(a.date));
                    setMusicList(list);
                });

                // Videos
                onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'videos'), (s) => {
                    const list = []; s.forEach(d => list.push({ id: d.id, ...d.data() }));
                    list.sort((a, b) => new Date(b.date) - new Date(a.date));
                    setVideoList(list);
                });
            };

            const showToast = (msg) => { setToast({ show: true, msg }); setTimeout(() => setToast({ show: false, msg: '' }), 3000); };
            const confirm = (title, msg, onConfirm, image = null) => setModal({ isOpen: true, title, msg, onConfirm, image });

            const requestAuth = (action) => {
                if (isAuthenticated) action();
                else { setAuthAction(() => action); setShowAuthOverlay(true); }
            };

            const onAuthSuccess = () => {
                setIsAuthenticated(true);
                localStorage.setItem('onnuri_auth_v2', 'true');
                setShowAuthOverlay(false);
                showToast("인증 성공");
                if (authAction) { authAction(); setAuthAction(null); }
            };

            const saveAttendance = async (dateStr, selectedNames, imageData) => {
                requestAuth(async () => {
                    const formattedDate = dateStr.replace(/-/g, '. ') + '.';
                    const existing = history.find(h => h.date === formattedDate);
                    const executeSave = async () => {
                        if (!user) return;
                        let finalImage = imageData;
                        if (finalImage && finalImage.startsWith('data:image')) finalImage = await compressImage(finalImage);
                        const record = { date: formattedDate, count: selectedNames.length, members: selectedNames, image: finalImage, updatedAt: new Date().toISOString() };
                        const { db, collection, doc, setDoc, addDoc, appId } = window.MyFirebase;
                        try {
                            if (existing) await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'history', existing.id), record);
                            else await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'history'), record);
                            showToast("저장되었습니다."); setAttendanceMap({});
                        } catch (err) { showToast("저장 실패"); }
                    };
                    confirm(existing ? "데이터 덮어쓰기" : "출석 저장", existing ? `${formattedDate} 기록이 이미 존재합니다.` : `${formattedDate} 기록을 저장하시겠습니까?`, executeSave, imageData);
                });
            };

            useEffect(() => { if (ready && window.lucide) window.lucide.createIcons(); }, [ready, activeTab, isAuthenticated, showAuthOverlay, editingHistory, showInterestModal]);

            if (!ready) return <div className="h-screen flex items-center justify-center text-blue-600 font-black">Loading...</div>;

            return (
                <div className="flex h-screen bg-[#f8faff] overflow-hidden flex-col md:flex-row relative fade-in">
                    {/* Desktop Sidebar */}
                    <aside className="hidden md:flex flex-col w-64 bg-white border-r border-gray-100 p-6 z-10 shrink-0">
                        <div className="mb-10 text-left">
                            <h1 className="text-2xl font-black text-[#4834d4] tracking-tight">주은혜 사역팀</h1>
                            <div className="text-[10px] mt-1 text-gray-400 font-bold uppercase"><span className="w-2 h-2 rounded-full bg-green-500 inline-block mr-1"></span>CONNECTED</div>
                        </div>
                        <nav className="flex-1 space-y-2">
                            <NavBtn id="stats" label="출석현황판" icon="bar-chart-2" active={activeTab} onClick={setActiveTab} />
                            <NavBtn id="attendance" label="출석체크" icon="check-square" active={activeTab} onClick={setActiveTab} />
                            <NavBtn id="music" label="성가음원&악보" icon="music" active={activeTab} onClick={setActiveTab} />
                            <NavBtn id="video" label="찬양팀영상" icon="youtube" active={activeTab} onClick={setActiveTab} />
                            <NavBtn id="manage" label="명단관리" icon="users" active={activeTab} onClick={setActiveTab} />
                        </nav>
                        <div className="mt-auto pt-6 border-t flex flex-col gap-2">
                            <button onClick={handleShare} className="w-full py-3 bg-blue-50 text-blue-600 rounded-xl text-xs font-bold active:scale-95 transition-all text-center">링크 공유</button>
                            {isAuthenticated && <button onClick={handleLogout} className="w-full py-3 bg-red-50 text-red-600 rounded-xl text-xs font-bold active:scale-95 transition-all text-center">로그아웃</button>}
                        </div>
                    </aside>

                    {/* Main Content */}
                    <main className="flex-1 flex flex-col h-full overflow-hidden relative">
                        <header className="md:hidden bg-white px-5 h-16 flex items-center justify-between border-b border-gray-100 shrink-0">
                            <span className="font-black text-lg text-[#4834d4]">주은혜 찬양사역팀</span>
                            <div className="flex items-center gap-2"><button onClick={handleShare} className="p-2 text-blue-500"><i data-lucide="share-2" className="w-5 h-5"></i></button></div>
                        </header>

                        <div className="flex-1 overflow-y-auto p-4 md:p-10 pb-28 md:pb-10 hide-scrollbar">
                            <div className="max-w-5xl mx-auto">
                                {activeTab === 'stats' && <StatsView history={history} members={members} onEdit={setEditingHistory} onInterestOpen={() => setShowInterestModal(true)} onGoToAttendance={() => setActiveTab('attendance')} />}
                                {activeTab === 'attendance' && <div className={!isAuthenticated ? "flex justify-center py-5" : ""}>{!isAuthenticated ? <AuthRequest onSuccess={onAuthSuccess} /> : <AttendanceView members={members} saveAttendance={saveAttendance} attendanceMap={attendanceMap} setAttendanceMap={setAttendanceMap} />}</div>}
                                {activeTab === 'manage' && <div className={!isAuthenticated ? "flex justify-center py-5" : ""}>{!isAuthenticated ? <AuthRequest onSuccess={onAuthSuccess} /> : <ManageView members={members} updateRoster={l => { const { db, doc, setDoc, appId } = window.MyFirebase; setMembers(l); setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'roster'), { list: l }); showToast("저장됨"); }} restoreInitial={() => confirm("명단 초기화", "기본 명단으로 복원하시겠습니까?", () => { const { db, doc, setDoc, appId } = window.MyFirebase; setMembers(INITIAL_MEMBERS); setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'roster'), { list: INITIAL_MEMBERS }); showToast("초기화 완료"); })} />}</div>}
                                {activeTab === 'music' && <MusicView list={musicList} onAuthRequired={requestAuth} />}
                                {activeTab === 'video' && <VideoView list={videoList} onAuthRequired={requestAuth} />}
                            </div>
                        </div>

                        {/* Mobile Navigation */}
                        <nav className="md:hidden fixed bottom-0 w-full h-20 bg-white border-t border-gray-100 flex items-center justify-around px-2 z-50 shadow-lg">
                            <NavIconBtn id="stats" icon="bar-chart-2" label="현황" active={activeTab} onClick={setActiveTab} />
                            <NavIconBtn id="attendance" icon="check-square" label="출석" active={activeTab} onClick={setActiveTab} />
                            <NavIconBtn id="music" icon="music" label="음원" active={activeTab} onClick={setActiveTab} />
                            <NavIconBtn id="video" icon="youtube" label="영상" active={activeTab} onClick={setActiveTab} />
                        </nav>
                    </main>

                    {/* Modals */}
                    {showAuthOverlay && <AuthOverlay masterPassword={MASTER_PASSWORD} onSuccess={onAuthSuccess} onClose={() => setShowAuthOverlay(false)} />}
                    {editingHistory && <HistoryDetailModal record={editingHistory} allMembers={members} onClose={() => setEditingHistory(null)} onSave={async r => { const { db, doc, setDoc, appId } = window.MyFirebase; await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'history', r.id), r); showToast("수정됨"); setEditingHistory(null); }} onDelete={async id => { confirm("삭제", "정말 삭제하시겠습니까?", async () => { const { db, doc, deleteDoc, appId } = window.MyFirebase; await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'history', id)); showToast("삭제됨"); setEditingHistory(null); }); }} isAuthenticated={isAuthenticated} requestAuth={requestAuth} />}
                    {showInterestModal && <InterestModal members={members} history={history} onClose={() => setShowInterestModal(false)} />}
                    {modal.isOpen && <div className="fixed inset-0 bg-black/60 backdrop-blur-sm z-[220] flex items-center justify-center p-5"><div className="bg-white rounded-[32px] p-8 w-full max-w-sm shadow-2xl scale-in"><h3 className="text-xl font-black text-gray-800 text-center">{modal.title}</h3><p className="text-gray-500 text-sm mt-2 text-center">{modal.msg}</p>{modal.image && <img src={modal.image} className="mt-4 rounded-xl border w-full h-32 object-cover" />}<div className="flex gap-3 mt-6"><button onClick={() => setModal({ ...modal, isOpen: false })} className="flex-1 py-4 bg-gray-50 text-gray-400 font-bold rounded-2xl">취소</button><button onClick={() => { modal.onConfirm(); setModal({ ...modal, isOpen: false }); }} className="flex-1 py-4 bg-blue-600 text-white rounded-2xl font-black">확인</button></div></div></div>}
                    {toast.show && <div className="fixed bottom-24 md:bottom-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-full text-sm font-medium z-[300] shadow-2xl animate-bounce text-center">{toast.msg}</div>}
                </div>
            );
        };

        const NavBtn = ({ id, label, icon, active, onClick }) => (
            <button onClick={() => onClick(id)} className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${active === id ? 'bg-blue-50 text-blue-600 font-bold shadow-sm' : 'text-gray-400 hover:bg-gray-50'} text-left`}>
                <i data-lucide={icon} className="w-5 h-5"></i>{label}
            </button>
        );

        const NavIconBtn = ({ id, icon, label, active, onClick }) => (
            <button onClick={() => onClick(id)} className={`flex flex-col items-center gap-1 transition-all ${active === id ? 'text-blue-600 scale-105' : 'text-gray-300'}`}>
                <i data-lucide={icon} className="w-6 h-6"></i>
                <span className="text-[10px] font-black uppercase text-center">{label}</span>
            </button>
        );

        const AuthRequest = ({ onSuccess }) => {
            const [input, setInput] = useState(""); const [error, setError] = useState("");
            const handleSubmit = (e) => { e.preventDefault(); if (input === MASTER_PASSWORD) onSuccess(); else { setError("비밀번호 불일치"); setInput(""); } };
            return (
                <div className="bg-white p-8 rounded-[32px] shadow-xl w-full max-w-sm border border-gray-50 scale-in mx-auto">
                    <div className="text-center mb-8">
                        <div className="w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-600 mx-auto mb-4"><i data-lucide="lock" className="w-8 h-8"></i></div>
                        <h1 className="text-xl font-black text-gray-800">매니저 인증</h1>
                        <p className="text-gray-400 text-sm mt-1 text-center">관리자 전용 페이지입니다.</p>
                    </div>
                    <form onSubmit={handleSubmit} className="space-y-4">
                        <input type="password" value={input} onChange={(e) => { setInput(e.target.value); setError(""); }} placeholder="비밀번호" className="w-full px-5 py-4 bg-gray-50 border-2 border-transparent rounded-2xl text-center font-bold outline-none tracking-widest" />
                        {error && <p className="text-red-500 text-xs text-center font-bold">{error}</p>}
                        <button type="submit" className="w-full py-4 bg-blue-600 text-white rounded-2xl font-black">인증하기</button>
                    </form>
                </div>
            );
        };

        const AuthOverlay = ({ masterPassword, onSuccess, onClose }) => (
            <div className="fixed inset-0 bg-black/70 backdrop-blur-sm z-[250] flex items-center justify-center p-5">
                <AuthRequest onSuccess={onSuccess} />
                <button onClick={onClose} className="absolute top-10 right-10 text-white"><i data-lucide="x" className="w-8 h-8"></i></button>
            </div>
        );

        const StatsView = ({ history, members, onEdit, onInterestOpen, onGoToAttendance }) => {
            const chartRef = useRef(null); const chartInstance = useRef(null);
            const [selectedYear, setSelectedYear] = useState(new Date().getFullYear().toString());
            const filteredByYear = useMemo(() => history.filter(h => h.date.startsWith(selectedYear)), [history, selectedYear]);
            const years = useMemo(() => Array.from(new Set(history.map(h => h.date.split('.')[0].trim()))).sort((a,b)=>b-a), [history]);
            if (years.length === 0) years.push(new Date().getFullYear().toString());

            useEffect(() => {
                if (filteredByYear.length > 0 && chartRef.current) {
                    if (chartInstance.current) chartInstance.current.destroy();
                    const sorted = [...filteredByYear].reverse();
                    chartInstance.current = new Chart(chartRef.current, {
                        type: 'line',
                        data: {
                            labels: sorted.map(h => h.date.split('. ')[2] + '일'),
                            datasets: [{ data: sorted.map(h => h.count), borderColor: '#4834d4', backgroundColor: 'rgba(72, 52, 212, 0.1)', fill: true, tension: 0.4 }]
                        },
                        options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
                    });
                }
            }, [filteredByYear]);

            const interestCount = useMemo(() => {
                if (history.length < 3) return 0;
                const recentMembers = history.slice(0, 3).flatMap(h => h.members);
                return members.filter(m => m.status === 'active' && !recentMembers.includes(m.name)).length;
            }, [history, members]);

            return (
                <div className="space-y-6 text-left">
                    <div className="flex justify-between items-center px-1">
                        <h2 className="text-3xl font-black text-gray-800">현황판</h2>
                        <select value={selectedYear} onChange={e => setSelectedYear(e.target.value)} className="bg-white border-0 shadow-sm rounded-xl px-4 py-2 text-sm font-bold">
                            {years.map(y => <option key={y} value={y}>{y}년</option>)}
                        </select>
                    </div>
                    <div className="grid grid-cols-3 gap-2">
                        <div className="bg-white p-4 rounded-3xl shadow-sm text-center">
                            <p className="text-gray-400 text-[10px] font-black uppercase mb-1">평균</p>
                            <p className="text-2xl font-black text-blue-600">{filteredByYear.length > 0 ? (filteredByYear.reduce((a,b)=>a+b.count,0)/filteredByYear.length).toFixed(1) : 0}</p>
                        </div>
                        <div className="bg-white p-4 rounded-3xl shadow-sm text-center">
                            <p className="text-gray-400 text-[10px] font-black uppercase mb-1">최다</p>
                            <p className="text-2xl font-black text-blue-600">{filteredByYear.length > 0 ? Math.max(...filteredByYear.map(h=>h.count)) : 0}</p>
                        </div>
                        <div onClick={onInterestOpen} className="bg-white p-4 rounded-3xl shadow-sm text-center cursor-pointer hover:bg-orange-50">
                            <p className="text-orange-400 text-[10px] font-black uppercase mb-1">관심</p>
                            <p className="text-2xl font-black text-orange-600">{interestCount}</p>
                        </div>
                    </div>
                    <div className="bg-white p-6 rounded-[32px] shadow-sm h-64"><canvas ref={chartRef}></canvas></div>
                    <div className="grid gap-3">
                        {filteredByYear.map(h => (
                            <div key={h.id} onClick={() => onEdit(h)} className="bg-white rounded-2xl p-4 shadow-sm flex items-center justify-between cursor-pointer">
                                <div className="flex items-center gap-3">
                                    <div className="w-10 h-10 bg-gray-50 rounded-lg flex items-center justify-center">{h.image ? <img src={h.image} className="w-full h-full object-cover" /> : <i data-lucide="calendar" className="w-5 h-5 text-gray-200"></i>}</div>
                                    <p className="font-bold text-gray-800 text-sm">{h.date}</p>
                                </div>
                                <span className="text-xs font-black text-blue-600 bg-blue-50 px-3 py-1 rounded-full">{h.count}명</span>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const AttendanceView = ({ members, saveAttendance, attendanceMap, setAttendanceMap }) => {
            const [date, setDate] = useState(new Date().toISOString().split('T')[0]);
            const [ocrStatus, setOcrStatus] = useState("idle");
            const [ocrProgress, setOcrProgress] = useState(0);
            const [previewImage, setPreviewImage] = useState(null);
            const activeMembers = members.filter(m => m.status === 'active');

            const handleOCR = async (e) => {
                const file = e.target.files[0]; if (!file) return;
                const reader = new FileReader();
                reader.onload = (event) => setPreviewImage(event.target.result);
                reader.readAsDataURL(file);
                setOcrStatus("processing"); setOcrProgress(0);
                try {
                    const worker = await Tesseract.createWorker('kor', 1, { logger: m => { if (m.status === 'recognizing text') setOcrProgress(Math.round(m.progress * 100)); } });
                    const { data: { text } } = await worker.recognize(file);
                    const cleanText = text.replace(/\s+/g, '');
                    const newMap = { ...attendanceMap };
                    activeMembers.forEach(m => { if (cleanText.includes(m.name)) newMap[m.name] = true; });
                    setAttendanceMap(newMap); setOcrStatus("success"); await worker.terminate();
                } catch (err) { setOcrStatus("idle"); }
            };

            return (
                <div className="space-y-6 text-left">
                    <div className="flex justify-between items-center">
                        <h2 className="text-3xl font-black text-gray-800">출석체크</h2>
                        <div className="flex gap-2">
                            <input type="date" value={date} onChange={e=>setDate(e.target.value)} className="bg-white rounded-xl px-4 py-2 text-sm font-bold shadow-sm" />
                            <button onClick={() => saveAttendance(date, Object.keys(attendanceMap), previewImage)} className="bg-blue-600 text-white px-6 py-2 rounded-xl font-bold shadow-lg">저장</button>
                        </div>
                    </div>
                    <div className="relative border-2 border-dashed border-gray-200 rounded-3xl p-6 flex flex-col items-center justify-center bg-white min-h-[160px]">
                        {previewImage ? (
                            <div className="relative w-full">
                                <img src={previewImage} className="w-full max-h-48 object-contain rounded-xl" />
                                {ocrStatus === "processing" && (
                                    <div className="absolute inset-0 bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center rounded-xl p-4">
                                        <div className="w-full bg-gray-100 h-2 rounded-full overflow-hidden max-w-[200px] mb-2"><div className="bg-blue-600 h-full progress-bar-fill" style={{ width: `${ocrProgress}%` }}></div></div>
                                        <p className="text-xs font-bold text-blue-600">인식 중... {ocrProgress}%</p>
                                    </div>
                                )}
                            </div>
                        ) : (
                            <div className="text-center"><i data-lucide="camera" className="w-8 h-8 text-blue-400 mx-auto mb-2"></i><p className="text-xs text-gray-400 font-medium">사진을 올려 이름을 자동 체크하세요.</p></div>
                        )}
                        <input type="file" accept="image/*" className="absolute inset-0 opacity-0 cursor-pointer" onChange={handleOCR} />
                    </div>
                    <div className="bg-white rounded-[32px] p-6 shadow-sm space-y-8">
                        {['staff', ...PARTS.map(p=>p.id)].map(partId => {
                            const partMembers = activeMembers.filter(m => m.part === partId);
                            if (partMembers.length === 0) return null;
                            return (
                                <div key={partId}>
                                    <h4 className="text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2">
                                        <span className="w-1.5 h-3.5 rounded-full" style={{ backgroundColor: PARTS.find(p=>p.id===partId)?.color || '#eab308' }}></span>
                                        {partId === 'staff' ? '지휘 / 반주' : PARTS.find(p=>p.id===partId).name}
                                    </h4>
                                    <div className="grid grid-cols-3 sm:grid-cols-4 gap-2">
                                        {partMembers.map(m => (
                                            <button key={m.name} onClick={() => { const next = { ...attendanceMap }; if (next[m.name]) delete next[m.name]; else next[m.name] = true; setAttendanceMap(next); }} className={`py-3 rounded-xl text-xs font-bold transition-all border ${attendanceMap[m.name] ? 'bg-blue-600 border-blue-600 text-white' : 'bg-gray-50 border-gray-100 text-gray-400'}`}>{m.name}</button>
                                        ))}
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );
        };

        const MusicView = ({ list, onAuthRequired }) => {
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [editTarget, setEditTarget] = useState(null);
            const [formData, setFormData] = useState({ date: new Date().toISOString().split('T')[0], title: '', cover: null, links: { soprano: '', alto: '', tenor: '', bass: '' } });

            const handleSubmit = async (e) => {
                e.preventDefault();
                const data = { ...formData };
                if (data.cover && data.cover.startsWith('data:image')) data.cover = await compressImage(data.cover);
                const { db, collection, doc, setDoc, addDoc, appId } = window.MyFirebase;
                const colRef = collection(db, 'artifacts', appId, 'public', 'data', 'music');
                if (editTarget) await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'music', editTarget.id), data);
                else await addDoc(colRef, data);
                setIsModalOpen(false);
            };

            return (
                <div className="space-y-6 pb-10 fade-in text-left">
                    <div className="flex justify-between items-center px-1">
                        <h2 className="text-3xl font-black text-gray-800 tracking-tight">성가음원&악보</h2>
                        <button onClick={() => onAuthRequired(() => { setEditTarget(null); setFormData({date: new Date().toISOString().split('T')[0], title:'', cover:null, links:{soprano:'', alto:'', tenor:'', bass:''}}); setIsModalOpen(true); })} className="p-2 bg-blue-50 text-blue-600 rounded-full"><i data-lucide="plus" className="w-6 h-6"></i></button>
                    </div>
                    <div className="grid gap-6">
                        {list.length === 0 ? <div className="bg-white rounded-3xl p-16 text-center text-gray-400 border border-dashed">등록된 음원이 없습니다.</div> : list.map(item => (
                            <div key={item.id} className="bg-white rounded-[32px] overflow-hidden shadow-sm border border-gray-50 flex flex-col">
                                <div className="h-48 bg-gray-100 overflow-hidden relative">
                                    {item.cover ? <img src={item.cover} className="w-full h-full object-cover" /> : <div className="w-full h-full flex items-center justify-center text-gray-300"><i data-lucide="music" className="w-12 h-12"></i></div>}
                                    <div className="absolute top-4 right-4 flex gap-1">
                                        <button onClick={() => onAuthRequired(() => { setEditTarget(item); setFormData(item); setIsModalOpen(true); })} className="w-8 h-8 bg-white/90 rounded-full flex items-center justify-center text-gray-400 hover:text-blue-500 shadow-lg"><i data-lucide="pencil" className="w-4 h-4"></i></button>
                                        <button onClick={() => onAuthRequired(async () => { if(confirm("영구 삭제하시겠습니까?")) await window.MyFirebase.deleteDoc(window.MyFirebase.doc(window.MyFirebase.db, 'artifacts', window.MyFirebase.appId, 'public', 'data', 'music', item.id)); })} className="w-8 h-8 bg-white/90 rounded-full flex items-center justify-center text-gray-400 hover:text-red-500 shadow-lg"><i data-lucide="trash-2" className="w-4 h-4"></i></button>
                                    </div>
                                </div>
                                <div className="p-6">
                                    <p className="text-[10px] text-gray-400 font-black uppercase mb-1">{item.date}</p>
                                    <h3 className="font-black text-gray-800 text-xl mb-4 leading-tight">{item.title}</h3>
                                    <div className="grid grid-cols-4 gap-2">
                                        {['soprano', 'alto', 'tenor', 'bass'].map(p => (
                                            <a key={p} href={item.links?.[p] || '#'} target={item.links?.[p] ? "_blank" : "_self"} className={`py-3 rounded-2xl text-[10px] font-black text-center transition-all ${item.links?.[p] ? 'bg-blue-50 text-blue-600 active:scale-95' : 'bg-gray-50 text-gray-300 pointer-events-none'}`}>
                                                {p.toUpperCase().slice(0,3)}
                                            </a>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                    {isModalOpen && (
                        <div className="fixed inset-0 bg-black/60 z-[300] flex items-center justify-center p-4 backdrop-blur-sm">
                            <div className="bg-white rounded-[32px] w-full max-w-md p-8 scale-in text-left max-h-[90vh] overflow-y-auto">
                                <h3 className="font-black text-xl mb-6">찬양 정보 등록</h3>
                                <form onSubmit={handleSubmit} className="space-y-4">
                                    <input type="date" value={formData.date} onChange={e=>setFormData({...formData, date:e.target.value})} className="w-full p-4 bg-gray-50 rounded-2xl font-bold" required />
                                    <input type="text" placeholder="곡 제목" value={formData.title} onChange={e=>setFormData({...formData, title:e.target.value})} className="w-full p-4 bg-gray-50 rounded-2xl font-bold" required />
                                    <div className="border-2 border-dashed rounded-2xl p-4 text-center">
                                        {formData.cover ? <img src={formData.cover} className="max-h-32 mx-auto mb-2 rounded" /> : <i data-lucide="image" className="w-8 h-8 mx-auto text-gray-300 mb-2"></i>}
                                        <input type="file" accept="image/*" onChange={e => { const f = e.target.files[0]; if(f){ const r=new FileReader(); r.onload=ev=>setFormData({...formData, cover:ev.target.result}); r.readAsDataURL(f); } }} className="w-full text-[10px]" />
                                    </div>
                                    <div className="grid grid-cols-2 gap-2">
                                        {['soprano', 'alto', 'tenor', 'bass'].map(p => (
                                            <input key={p} type="url" placeholder={`${p.toUpperCase()} 음원 링크`} value={formData.links[p]} onChange={e=>setFormData({...formData, links:{...formData.links, [p]:e.target.value}})} className="w-full p-3 bg-gray-50 rounded-xl text-xs" />
                                        ))}
                                    </div>
                                    <div className="flex gap-2 pt-4">
                                        <button type="button" onClick={() => setIsModalOpen(false)} className="flex-1 py-4 bg-gray-100 rounded-2xl font-bold">취소</button>
                                        <button type="submit" className="flex-1 py-4 bg-blue-600 text-white rounded-2xl font-black">저장</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const VideoView = ({ list, onAuthRequired }) => {
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [editTarget, setEditTarget] = useState(null);
            const [formData, setFormData] = useState({ date: new Date().toISOString().split('T')[0], title: '', url: '' });

            const handleSubmit = async (e) => {
                e.preventDefault();
                const thumb = `https://img.youtube.com/vi/${extractYoutubeId(formData.url)}/mqdefault.jpg`;
                const data = { ...formData, thumbnail: thumb };
                const { db, collection, doc, setDoc, addDoc, appId } = window.MyFirebase;
                const colRef = collection(db, 'artifacts', appId, 'public', 'data', 'videos');
                if (editTarget) await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'videos', editTarget.id), data);
                else await addDoc(colRef, data);
                setIsModalOpen(false);
            };

            return (
                <div className="space-y-6 pb-10 fade-in text-left">
                    <div className="flex justify-between items-center px-1">
                        <h2 className="text-3xl font-black text-gray-800 tracking-tight">찬양팀영상</h2>
                        <button onClick={() => onAuthRequired(()=>setIsModalOpen(true))} className="p-2 bg-blue-50 text-blue-600 rounded-full"><i data-lucide="plus" className="w-6 h-6"></i></button>
                    </div>
                    <div className="grid gap-6">
                        {list.length === 0 ? <div className="bg-white rounded-3xl p-16 text-center text-gray-400 border border-dashed">등록된 영상이 없습니다.</div> : list.map(item => (
                            <div key={item.id} className="bg-white rounded-[32px] overflow-hidden shadow-sm border border-gray-50 cursor-pointer" onClick={() => window.open(item.url, '_blank')}>
                                <div className="aspect-video relative bg-gray-100">
                                    <img src={item.thumbnail} className="w-full h-full object-cover" />
                                    <div className="absolute inset-0 bg-black/10 flex items-center justify-center">
                                        <div className="w-14 h-14 bg-white/90 rounded-full flex items-center justify-center pl-1 shadow-2xl"><i data-lucide="play" className="w-6 h-6 text-red-600 fill-current"></i></div>
                                    </div>
                                </div>
                                <div className="p-6 flex justify-between items-start">
                                    <div className="min-w-0">
                                        <p className="text-[10px] text-gray-400 font-black uppercase mb-1">{item.date}</p>
                                        <h3 className="font-black text-gray-800 text-xl leading-tight line-clamp-2">{item.title}</h3>
                                    </div>
                                    <div className="flex gap-1" onClick={e => e.stopPropagation()}>
                                        <button onClick={() => onAuthRequired(() => { setEditTarget(item); setFormData(item); setIsModalOpen(true); })} className="p-2 text-gray-300 hover:text-blue-500 transition-colors"><i data-lucide="pencil" className="w-4 h-4"></i></button>
                                        <button onClick={() => onAuthRequired(async () => { if(confirm("삭제하시겠습니까?")) await window.MyFirebase.deleteDoc(window.MyFirebase.doc(window.MyFirebase.db, 'artifacts', window.MyFirebase.appId, 'public', 'data', 'videos', item.id)); })} className="p-2 text-gray-300 hover:text-red-500"><i data-lucide="trash-2" className="w-4 h-4"></i></button>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                    {isModalOpen && (
                        <div className="fixed inset-0 bg-black/60 z-[300] flex items-center justify-center p-4 backdrop-blur-sm">
                            <div className="bg-white rounded-[32px] w-full max-w-md p-8 scale-in text-left">
                                <h3 className="font-black text-xl mb-6">영상 등록</h3>
                                <form onSubmit={handleSubmit} className="space-y-4">
                                    <input type="date" value={formData.date} onChange={e=>setFormData({...formData, date:e.target.value})} className="w-full p-4 bg-gray-50 rounded-2xl font-bold" required />
                                    <input type="text" placeholder="영상 제목" value={formData.title} onChange={e=>setFormData({...formData, title:e.target.value})} className="w-full p-4 bg-gray-50 rounded-2xl font-bold" required />
                                    <input type="url" placeholder="유튜브 URL (예: https://youtu.be/...)" value={formData.url} onChange={e=>setFormData({...formData, url:e.target.value})} className="w-full p-4 bg-gray-50 rounded-2xl font-bold" required />
                                    <div className="flex gap-2 pt-4">
                                        <button type="button" onClick={() => setIsModalOpen(false)} className="flex-1 py-4 bg-gray-100 rounded-2xl font-bold">취소</button>
                                        <button type="submit" className="flex-1 py-4 bg-blue-600 text-white rounded-2xl font-black">저장</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const ManageView = ({ members, updateRoster, restoreInitial }) => (
            <div className="space-y-6 text-left">
                <div className="flex justify-between items-center">
                    <h2 className="text-3xl font-black text-gray-800">명단관리</h2>
                    <button onClick={restoreInitial} className="text-[10px] font-black text-blue-600 bg-blue-50 px-4 py-2 rounded-full uppercase">명단 초기화</button>
                </div>
                <div className="bg-white rounded-[32px] shadow-sm border border-gray-50 overflow-hidden divide-y divide-gray-50">
                    {members.sort((a,b)=>a.name.localeCompare(b.name, 'ko')).map(m => (
                        <div key={m.name} className="flex items-center justify-between p-4 hover:bg-gray-50 transition-colors">
                            <div className="flex items-center gap-3">
                                <div className="w-2 h-6 rounded-full" style={{ backgroundColor: m.status === 'active' ? (PARTS.find(p=>p.id===m.part)?.color || '#eab308') : '#cbd5e1' }}></div>
                                <p className={`font-bold text-sm ${m.status === 'active' ? 'text-gray-800' : 'text-gray-300'}`}>{m.name}</p>
                            </div>
                            <button onClick={() => updateRoster(members.map(x=>x.name===m.name?{...x,status:m.status==='active'?'inactive':'active'}:x))} className={`px-4 py-1.5 rounded-full text-[10px] font-black transition-all ${m.status === 'active' ? 'bg-green-100 text-green-600' : 'bg-gray-100 text-gray-400'}`}>
                                {m.status === 'active' ? "활동 중" : "휴식 중"}
                            </button>
                        </div>
                    ))}
                </div>
            </div>
        );

        const HistoryDetailModal = ({ record, allMembers, onClose, onSave, onDelete, isAuthenticated, requestAuth }) => {
            const [isEditing, setIsEditing] = useState(false);
            const [selected, setSelected] = useState(new Set(record.members || []));
            const toggleMember = (name) => { if (!isEditing) return; const n = new Set(selected); if (n.has(name)) n.delete(name); else n.add(name); setSelected(n); };
            return (
                <div className="fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4">
                    <div className="bg-white rounded-[32px] w-full max-w-lg h-[85vh] flex flex-col shadow-2xl scale-in overflow-hidden">
                        <header className="p-6 border-b flex justify-between items-start">
                            <div className="text-left"><h3 className="text-xl font-black text-gray-800">{record.date} 상세</h3><p className="text-[10px] text-gray-400 font-bold uppercase">{selected.size}명 참석</p></div>
                            <div className="flex gap-2">
                                {!isEditing && <button onClick={() => requestAuth(() => setIsEditing(true))} className="p-2 text-blue-500 bg-blue-50 rounded-full"><i data-lucide="pencil" className="w-5 h-5"></i></button>}
                                <button onClick={onClose} className="p-2 text-gray-300"><i data-lucide="x" className="w-6 h-6"></i></button>
                            </div>
                        </header>
                        <div className="flex-1 overflow-y-auto p-6 space-y-6 hide-scrollbar">
                            {record.image && <img src={record.image} className="w-full h-48 object-cover rounded-2xl border mb-4" />}
                            <div className="grid grid-cols-3 gap-2">
                                {allMembers.filter(m => m.status === 'active' || selected.has(m.name)).sort((a,b)=>a.name.localeCompare(b.name, 'ko')).map(m => (
                                    <button key={m.name} onClick={() => toggleMember(m.name)} className={`py-3 rounded-xl text-xs font-bold border transition-all ${selected.has(m.name) ? 'bg-blue-600 border-blue-600 text-white' : 'bg-gray-50 border-gray-100 text-gray-300'}`}>{m.name}</button>
                                ))}
                            </div>
                        </div>
                        {isEditing && (
                            <footer className="p-6 border-t bg-white flex items-center justify-between">
                                <button onClick={() => onDelete(record.id)} className="text-red-500 font-black text-xs">기록 삭제</button>
                                <div className="flex gap-2">
                                    <button onClick={() => setIsEditing(false)} className="px-5 py-3 bg-gray-50 text-gray-400 font-bold rounded-2xl text-xs">취소</button>
                                    <button onClick={() => onSave({...record, members: Array.from(selected), count: selected.size})} className="px-6 py-3 bg-blue-600 text-white rounded-2xl font-black shadow-lg text-xs">수정 완료</button>
                                </div>
                            </footer>
                        )}
                    </div>
                </div>
            );
        };

        const InterestModal = ({ members, history, onClose }) => {
            const activeOnes = members.filter(m => m.status === 'active');
            const recent3Weeks = history.slice(0, 3).flatMap(h => h.members);
            const attentionList = activeOnes.filter(m => !recent3Weeks.includes(m.name));
            return (
                <div className="fixed inset-0 bg-black/60 backdrop-blur-sm z-[200] flex items-center justify-center p-4">
                    <div className="bg-white rounded-[32px] w-full max-w-lg h-[60vh] flex flex-col shadow-2xl scale-in">
                        <header className="p-6 border-b flex justify-between items-center text-left">
                            <h3 className="text-xl font-black text-gray-800 flex items-center gap-2"><i data-lucide="heart" className="text-red-500 w-6 h-6"></i> 장기 결석 대원 관리</h3>
                            <button onClick={onClose} className="p-2 text-gray-400"><i data-lucide="x" className="w-6 h-6"></i></button>
                        </header>
                        <div className="flex-1 overflow-y-auto p-6 space-y-4 text-left">
                            <p className="text-xs text-gray-400 font-bold uppercase tracking-widest">3주 이상 미출석 대원 ({attentionList.length}명)</p>
                            <div className="grid grid-cols-3 gap-2">
                                {attentionList.length === 0 ? <p className="col-span-3 text-center py-10 text-gray-300 font-bold">없음</p> : attentionList.map(m => <div key={m.name} className="bg-orange-50 p-3 rounded-2xl text-center border border-orange-100 font-bold text-orange-700 text-sm">{m.name}</div>)}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
